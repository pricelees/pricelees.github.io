{"componentChunkName":"component---src-templates-category-template-js","path":"/posts/deregister","result":{"pageContext":{"currentCategory":"deregister","categories":["All","level4","aws","deregister","wait","level2","Spring","API","Specification","JsonFormat","ObjectMapper","Interceptor","Exception","Welcome"],"edges":[{"node":{"id":"0dce0473-b51b-5026-b22f-32b760578a3f","excerpt":"배경 이번 글에서 다루는 deregister-targets 등의 개념은 1편에 작성되어 있습니다..ㅎㅎ 1편을 먼저 읽고 이번 글을 읽어주시면 감사하겠습니다. 지난 글에서 통계량을 이용해 deregister-targets 호출 이후 실제 트래픽 중단까지 소요되는 최대 시간을 15초로 잡았었습니다. 지난번에 계산했던 트래픽 중단까지의 시간이 15초를 초과할 확률은 0.000021% 로 극히 미미한 수준이지만, 그럼에도 발생 가능성이 있다는 찝찝함은 있었던 것 같습니다. 그래서.. aws-cli의 elbv2 API 문서를 하나씩 살펴보던 도중 wait이라는 키워드를 발견했는데요, 이번 글에서는 wait을 이용하여 기존의 불확실성을 더 개선하는 방법을 소개하겠습니다. wait API Wait until a particular condition is satisfied. Each subcommand polls an API until the listed requirement is met. 공…","fields":{"slug":"/woowacourse/level4/improving_deployment/3/"},"frontmatter":{"categories":"level4 aws deregister wait","title":"무중단 배포 과정에서의 불확실성 개선 [2] - AWS CLI의 wait API 적용","date":"November 12, 2024"}},"next":{"fields":{"slug":"/woowacourse/level4/improving_deployment/2/"}},"previous":null},{"node":{"id":"fb8e534b-6253-5881-85b7-98290bffa9df","excerpt":"배경 기존 방법은, 의도적으로 헬스체크에 실패하도록 하는 API를 호출하여 ELB(로드 밸런서)의 트래픽 배분을 막는 방법이었습니다. 팀원인 테니가 상황에 맞게 훌륭하게 구현해줬고, 문제될 여지가 거의 없다고는 느껴지지만 아래의 불확실성은 있다는 생각이 들었습니다. 해당 API의 호출 시점, 그리고 서버의 상황에 따라 실제 트래픽 중단까지 최대 10초에 가까운 시간 차이가 발생합니다. 배포 작업이 애플리케이션의 영향을 받습니다. 현재는 API를 호출하여 healthcheck에 사용되는라 불리언 필드를 false로 바꿔 헬스체크에 실패하도록 하고 있는데, 이걸 다시 true로 바꾸는 기능은 없습니다. 즉 배포 과정에서의 사소한 실수로 불필요하게 해당 API가 호출된다면 Springboot를 다시 배포해야 합니다. 두개의 원인을 보면 결국 API를 다른 무언가로 대체하는 것이 해결 방법인 것 같은데요, 물론 다른 해결 방법도 있겠지만 이번 글에서는 AWS CLI에서 사용하는 Dereg…","fields":{"slug":"/woowacourse/level4/improving_deployment/2/"},"frontmatter":{"categories":"level4 aws deregister","title":"무중단 배포 과정에서의 불확실성 개선 [1] - AWS CLI를 이용한 등록 취소","date":"November 11, 2024"}},"next":{"fields":{"slug":"/woowacourse/level4/improving_deployment/1/"}},"previous":{"fields":{"slug":"/woowacourse/level4/improving_deployment/3/"}}}]}},"staticQueryHashes":["1073350324","1956554647","2938748437"]}