{"componentChunkName":"component---src-templates-blog-template-js","path":"/woowacourse/level2/Layered_Architecture_적용_과정에서의_DTO_사용에_대한_고민/","result":{"data":{"cur":{"id":"734d03d3-30b0-5ab4-b86d-a25498e6eb73","html":"<h2 id=\"배경\" style=\"position:relative;\"><a href=\"#%EB%B0%B0%EA%B2%BD\" aria-label=\"배경 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>배경</h2>\n<p><a href=\"https://github.com/pricelees/spring-roomescape-admin/tree/step2\">우아한테크코스의 첫 스프링 미션</a>을 진행하며, 처음으로 <strong>레이어드 아키텍쳐</strong>를 적용해보는\n경험을 하게 되었습니다.</p>\n<p>Controller에서 <strong>JdbcTemplate</strong>을 사용하여 DB 처리를 하는 기존 코드에 Service - Repository 계층을 추가하는 과정에서 자연스레 들었던 고민은 <strong>도메인과 DTO의 처리를 어떻게\n해야할지</strong>였고, 이때 가졌던 생각의 흐름을 정리해보고자 합니다.</p>\n<p>아래의 예시는 <strong>예약을 추가(저장) 하는 기능</strong>을 바탕으로 작성하였습니다😄</p>\n<br/>\n<h2 id=\"개요\" style=\"position:relative;\"><a href=\"#%EA%B0%9C%EC%9A%94\" aria-label=\"개요 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>개요</h2>\n<h3 id=\"api의-구성\" style=\"position:relative;\"><a href=\"#api%EC%9D%98-%EA%B5%AC%EC%84%B1\" aria-label=\"api의 구성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>API의 구성</h3>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\">POST /reservations HTTP/1.1\ncontent-type: application/json\n\n{\n  \"date\": \"2024-04-20\",\n  \"name\": \"상돌\",\n  \"timeId\": 1\n}</code></pre></div>\n<p>예약을 추가할 때는 <code class=\"language-text\">이름, 날짜, 시간 ID값</code> 을 JSON 형태로 요청합니다. 예약 시간은 별도의 데이터베이스 테이블에 저장을 해둔 뒤, 시간의 ID값을 이용하여 조회합니다.</p>\n<br/>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\">HTTP/1.1 200\nContent-Type: application/json\n\n{\n  \"id\": 1,\n  \"name\": \"상돌\",\n  \"date\": \"2024-04-20\",\n  \"time\" : {\n    \"id\": 1,\n    \"startAt\" : \"10:00\"\n  }\n}</code></pre></div>\n<p>요청이 들어오면 <strong>ID값은 자동으로 채운 뒤</strong>(AUTO_INCREMENT), 입력된 시간 ID에 해당되는 예약 시간까지 불러와서 저장된 예약 내역을 응답하는 구조입니다.</p>\n<br/>\n<h3 id=\"도메인\" style=\"position:relative;\"><a href=\"#%EB%8F%84%EB%A9%94%EC%9D%B8\" aria-label=\"도메인 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>도메인</h3>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ReservationTime</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">Long</span> id<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> startAt<span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// 생성자 및 Getter..</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Reservation</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">Long</span> id<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> date<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">ReservationTime</span> time<span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// 생성자 및 Getter..</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>여기서 날짜와 시간은 각각 LocalDate와 LocalTime을 사용할 수 있으나, 이번 단계에선 고려하지 않았습니다😄</p>\n<br/>\n<h3 id=\"요청-dto\" style=\"position:relative;\"><a href=\"#%EC%9A%94%EC%B2%AD-dto\" aria-label=\"요청 dto permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>요청 DTO</h3>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">record</span> <span class=\"token class-name\">ReservationRequest</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span> date<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Long</span> timeId<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>요청 DTO는 API 명세에 따라 이름, 날짜, 시간 ID값으로 구성되어 있습니다.</li>\n</ul>\n<br/>\n<h3 id=\"응답-dto\" style=\"position:relative;\"><a href=\"#%EC%9D%91%EB%8B%B5-dto\" aria-label=\"응답 dto permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>응답 DTO</h3>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">record</span> <span class=\"token class-name\">TimeResponse</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Long</span> id<span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span> startAt<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">TimeResponse</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ReservationTime</span> reservationTime<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">(</span>reservationTime<span class=\"token punctuation\">.</span><span class=\"token function\">getId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> reservationTime<span class=\"token punctuation\">.</span><span class=\"token function\">getStartAt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>예약 시간에 대한 응답 DTO입니다. ID와 시간으로 이루어져 있습니다.</li>\n</ul>\n<br/>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">record</span> <span class=\"token class-name\">ReservationResponse</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Long</span> id<span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span> date<span class=\"token punctuation\">,</span> <span class=\"token class-name\">TimeResponse</span> time<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">ReservationResponse</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Reservation</span> reservation<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">(</span>reservation<span class=\"token punctuation\">.</span><span class=\"token function\">getId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> reservation<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> reservation<span class=\"token punctuation\">.</span><span class=\"token function\">getDate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                <span class=\"token keyword\">new</span> <span class=\"token class-name\">TimeResponse</span><span class=\"token punctuation\">(</span>reservation<span class=\"token punctuation\">.</span><span class=\"token function\">getTime</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>예약에 대한 응답 DTO입니다. API 명세와 동일하게 ID, 이름, 날짜, 시간으로 구성되어 있습니다.</li>\n</ul>\n<br/>\n<h2 id=\"첫-번째-시도\" style=\"position:relative;\"><a href=\"#%EC%B2%AB-%EB%B2%88%EC%A7%B8-%EC%8B%9C%EB%8F%84\" aria-label=\"첫 번째 시도 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>첫 번째 시도</h2>\n<h3 id=\"구현-방법\" style=\"position:relative;\"><a href=\"#%EA%B5%AC%ED%98%84-%EB%B0%A9%EB%B2%95\" aria-label=\"구현 방법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>구현 방법</h3>\n<p>DTO 처리와 관련하여 열심히 구글링을 해본 결과, 크게 다음의 두 가지 의견으로 나뉘는 것을 확인하였습니다.</p>\n<ol>\n<li>\n<p><strong>Controller에서 요청 DTO를 도메인으로 변환</strong>하고 Service에 전달한다.</p>\n</li>\n<li>\n<p><strong>Controller에서 요청 DTO를 Service로 전달하고, Service에서 도메인으로 변환</strong>한 뒤 Repository로 전달한다.</p>\n</li>\n</ol>\n<p>저는 아래의 <strong>(지극히 주관적인)이유</strong>로 <strong>1번 방법</strong>을 선택하였습니다.</p>\n<ol>\n<li>\n<p>DTO는 도메인에 비해 변경 가능성이 크다.</p>\n</li>\n<li>\n<p>서비스에서 DTO를 처리하면, DTO가 변하면 서비스의 로직도 수정해야 한다.</p>\n</li>\n<li>\n<p>이전 레벨에서, <strong>로직은 가급적 수정하지 않는 것이 좋다</strong>는 것을 크게 느낄 수 있었기에 가급적 수정하지 않는 방향으로 구현하고 싶었다.</p>\n</li>\n</ol>\n<br/>\n코드는 다음과 같습니다.\n<br/>\n<p><U><strong>Controller</strong></U></p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@PostMapping</span>\n<span class=\"token keyword\">public</span> <span class=\"token class-name\">ReservationResponse</span> <span class=\"token function\">addReservation</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@RequestBody</span> <span class=\"token class-name\">ReservationRequest</span> request<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">ReservationTime</span> time <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ReservationTime</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">.</span><span class=\"token function\">getTimeId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\">Reservation</span> reservation <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Reservation</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">.</span><span class=\"token function\">getDate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> time<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token class-name\">Reservation</span> created <span class=\"token operator\">=</span> reservationService<span class=\"token punctuation\">.</span><span class=\"token function\">addReservation</span><span class=\"token punctuation\">(</span>reservation<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ReservationResponse</span><span class=\"token punctuation\">(</span>created<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br/>\n<p><U><strong>Service</strong></U></p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Service</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ReservationService</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">ReservationDao</span> reservationDao<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">ReservationTimeDao</span> reservationTimeDao<span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// 생성자..</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Reservation</span> <span class=\"token function\">addReservation</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Reservation</span> reservation<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">ReservationTime</span> reservationTime <span class=\"token operator\">=</span> reservationTimeDao<span class=\"token punctuation\">.</span><span class=\"token function\">findById</span><span class=\"token punctuation\">(</span>reservation<span class=\"token punctuation\">.</span><span class=\"token function\">getTime</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">Reservation</span> reservationForAdd <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Reservation</span><span class=\"token punctuation\">(</span>\n                reservation<span class=\"token punctuation\">.</span><span class=\"token function\">getId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> reservation<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> reservation<span class=\"token punctuation\">.</span><span class=\"token function\">getDate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> reservationTime\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">return</span> reservationDao<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>reservationForAdd<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br/>\n<h3 id=\"문제점\" style=\"position:relative;\"><a href=\"#%EB%AC%B8%EC%A0%9C%EC%A0%90\" aria-label=\"문제점 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>문제점</h3>\n<p>일단 구현 자체는 완료되었으나, <strong>불편함이 느껴지는 몇몇 문제</strong>가 있었습니다.</p>\n<br/>\n<p><U><strong>문제1. 컨트롤러에서 객체를 생성할 때 null 값을 입력하는 것</strong></U></p>\n<p>위의 컨트롤러 코드를 보면, <code class=\"language-text\">ReservationTime, Reservation</code>  객체를 생성할 때 null을 입력합니다. 보기 안 좋은 것도 있고, 전체 맥락을 모르는 사람이 이 코드를 보고 null값을 바로\nAUTO_INCREMENT 되는 ID로 생각할 수 있을까? 에 대한 의문이 들었습니다.</p>\n<p>하지만, 이 부분은 다음과 같이 <strong>생성자를 추가하여 해결</strong>할 수도 있기에 큰 문제라고 생각하진 않았습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ReservationTime</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">Long</span> id<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> startAt<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">ReservationTime</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> startAt<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> startAt<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// 다른 생성자 및 Getter..</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br/>\n<p><U><strong>문제2. 객체를 여러번 생성해야 하고, getter의 호출이 많은 것</strong></U></p>\n<p>컨트롤러에서도 ReservationTime과 Reservation 객체를 생성하는데, <strong>서비스에서도 똑같이 생성합니다.</strong> 특히 시간 ID로 ReservationTime 객체를 조회할 때, <strong>그냥 ID로 한번에\n조회</strong>하면 되는 것을 <code class=\"language-text\">컨트롤러에서 ReservationTime 객체 생성 → 이 객체로 컨트롤러에서 Reservation 객체 생성 → Service에서 Reservation 객체에 Getter를 두 번 적용하여 시간 ID값을 꺼냄</code>\n이라는 불필요하게 복잡한 방법을 사용한다는 생각을 지울 수 없었습니다.</p>\n<br/>\n<p><U><strong>⭐️문제3. 컨트롤러가 도메인을 알고 있어야 한다.</strong></U></p>\n<p>문제1에서 느낀 것인데, 컨트롤러에서 null값을 넣는 것을 떠나서 <strong>ID 필드가 있다는 것을 알아야 하나?</strong> 라는 의문이 들었습니다. 컨트롤러에 도메인 객체가 있게 되면 실제 요청 / 응답에 사용되는 값 이외의\n다른 값들이 노출될 여지가 있다고 생각했습니다.</p>\n<br/>\n<h2 id=\"두-번째-시도\" style=\"position:relative;\"><a href=\"#%EB%91%90-%EB%B2%88%EC%A7%B8-%EC%8B%9C%EB%8F%84\" aria-label=\"두 번째 시도 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>두 번째 시도</h2>\n<h3 id=\"구현-방법-1\" style=\"position:relative;\"><a href=\"#%EA%B5%AC%ED%98%84-%EB%B0%A9%EB%B2%95-1\" aria-label=\"구현 방법 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>구현 방법</h3>\n<p>이전의 문제2,3이 생각보다 크게 느껴져서 이번에는 <strong>컨트롤러에서 DTO를 서비스로 그대로 전달하고, 서비스에서 도메인으로 변환하는</strong> 방법을 시도하였습니다. 응답할 때도 마찬가지로 <strong>서비스에서 도메인을 DTO로\n변환하여 컨트롤러에 전달</strong>하도록 수정하였습니다.</p>\n<br/>\n<p><U><strong>Controller</strong></U></p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@PostMapping</span>\n<span class=\"token keyword\">public</span> <span class=\"token class-name\">ReservationResponse</span> <span class=\"token function\">addReservation</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@RequestBody</span> <span class=\"token class-name\">ReservationRequest</span> request<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> reservationService<span class=\"token punctuation\">.</span><span class=\"token function\">addReservation</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br/>\n<p><U><strong>Service</strong></U></p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token class-name\">ReservationResponse</span> <span class=\"token function\">addReservation</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ReservationRequest</span> request<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">ReservationTime</span> reservationTime <span class=\"token operator\">=</span> reservationTimeDao<span class=\"token punctuation\">.</span><span class=\"token function\">findById</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span><span class=\"token function\">timeId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\">Reservation</span> reservationForAdd <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Reservation</span><span class=\"token punctuation\">(</span>\n            request<span class=\"token punctuation\">.</span><span class=\"token function\">name</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">.</span><span class=\"token function\">date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> reservationTime\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token class-name\">Reservation</span> created <span class=\"token operator\">=</span> reservationDao<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>reservationForAdd<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ReservationResponse</span><span class=\"token punctuation\">(</span>created<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong>이전 문단의 문제1에서 언급한 해결책인 생성자 추가</strong>와 더불어 getter도 이천처럼 과하게 사용하지 않고, 코드가 훨씬 간결해졌습니다. 지금 단계에서는 DTO가 변경될 가능성도 크게 없고, 별도의 로직이라고\n할 법한 것도 없기에 간결하다는 장점이 명확한 이 방법을 최종적으로 사용하였습니다.</p>\n<br/>\n<h3 id=\"문제점-1\" style=\"position:relative;\"><a href=\"#%EB%AC%B8%EC%A0%9C%EC%A0%90-1\" aria-label=\"문제점 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>문제점</h3>\n<p>코드가 간결해진다는 장점이 정말 크게 다가오기 때문에 이 방법을 사용하였으나, 예상되는 문제점이 없는 것은 아니었습니다.</p>\n<br/>\n<p><U><strong>문제1. DTO의 변화가 컨트롤러와 서비스 레이어에 모두 영향을 주게 된다.</strong></U></p>\n<p>같은 DTO를 사용하기에, 이 DTO의 변화가 두 레이어에 영향을 주게 되며, 추가적으로 <strong>요청이라는 View의 정보가 Service까지 영향을 미친다</strong>는 생각 역시 할 수 있습니다.</p>\n<p>가장 간단하게 떠오르는 해결 방법은 <strong>서비스용 DTO를 별도로 생성</strong>하고, 컨트롤러에서 변환한 뒤 넘기는 것인데 지금의 구조에선 <strong>두 DTO가 어차피 같은 값을 가져야 하기에</strong> 큰 의미가 없다는\n생각이었습니다.</p>\n<br/>\n<p><U><strong>문제2. (서비스에서 응답 DTO를 반환하는 경우) 서비스간에 의존한다면?</strong></U></p>\n<p>서비스에서 도메인이 아닌 DTO를 반환한다면 서비스간의 의존이 존재하는, 다음의 예시와 같은 문제가 발생할 수 있습니다.</p>\n<p><strong>예시</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Service</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ReservationTimeService</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">ReservationTimeResponse</span> <span class=\"token function\">findById</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Long</span> id<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>ReservationTimeService에서 findById()는 ReservationTimeResponse라는 DTO를 반환합니다.</li>\n</ul>\n<br/>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Service</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ReservationService</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">ReservationDao</span> reservationDao<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">ReservationTimeService</span> timeService<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">ReservationResponse</span> <span class=\"token function\">addReservation</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ReservationRequest</span> request<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">ReservationTimeResponse</span> timeResponse <span class=\"token operator\">=</span> timeService<span class=\"token punctuation\">.</span><span class=\"token function\">findById</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span><span class=\"token function\">timeId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">// ReservationTimeResponse를 ReservationTime으로 변환하는 로직 필요</span>\n        <span class=\"token class-name\">ReservationTime</span> reservationTime <span class=\"token operator\">=</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n\n        <span class=\"token class-name\">Reservation</span> reservationForAdd <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Reservation</span><span class=\"token punctuation\">(</span>\n                request<span class=\"token punctuation\">.</span><span class=\"token function\">name</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">.</span><span class=\"token function\">date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> reservationTime\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token class-name\">Reservation</span> created <span class=\"token operator\">=</span> reservationDao<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>reservationForAdd<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ReservationResponse</span><span class=\"token punctuation\">(</span>created<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>\n<p>예약을 추가하려면 Reservation 객체가 필요한데, 이 객체를 생성하려면 ReservationTime이 필요합니다.</p>\n</li>\n<li>\n<p>만약 ReservationTimeService에서 DTO를 반환하는 경우, 이 DTO를 도메인으로 변환하는 추가적인 연산이 필요해지게 됩니다.</p>\n</li>\n</ul>\n<p>하지만 <strong>지금의 구조에선 서비스간의 의존이 없고, 컨트롤러에 도메인 객체를 노출하는 것이 더 좋지 않은 방법으로 느껴졌기에</strong> 서비스에서 응답 DTO를 반환하는 지금의 구조를 유지하였습니다.</p>\n<br/>\n<h2 id=\"결론-및-요약\" style=\"position:relative;\"><a href=\"#%EA%B2%B0%EB%A1%A0-%EB%B0%8F-%EC%9A%94%EC%95%BD\" aria-label=\"결론 및 요약 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>결론 및 요약</h2>\n<p>이번 단계의 미션을 진행하며 했던 여러 시행착오와 고민 끝에 다음의 결론을 내렸습니다.</p>\n<ul>\n<li>\n<p>요청 시 컨트롤러에서 DTO를 도메인으로 변환하지 않는다.</p>\n<ul>\n<li>\n<p>컨트롤러에서 받는 요청값과 서비스에서 사용하는 값이 다른 경우 서비스 전용 DTO를 만든다.</p>\n</li>\n<li>\n<p>컨트롤러에서 받는 요청값을 서비스에서 그대로 사용한다면, 요청 DTO를 서비스로 그대로 전달한다.</p>\n</li>\n</ul>\n</li>\n<li>\n<p>서비스간의 의존이 없도록 구현하고, 서비스에서 응답 DTO를 반환하도록 구현한다.</p>\n</li>\n</ul>\n<p>지금 내린 결론이 당연히 정답은 아니기에 이후의 과정에서 방법이 변할 수도 있겠지만, 새로운 구현을 해야 할 때 고민하지 않고 바로 나아갈 방향을 정했고, 상황에 맞는 방법을 선택할 수 있게 되었다는 점에서\n정말 의미있는 경험을 했다고 생각합니다😄</p>\n<p>읽어주셔서 감사합니다! 즐거운 하루 보내세요🙇</p>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#%EB%B0%B0%EA%B2%BD\">배경</a></p>\n</li>\n<li>\n<p><a href=\"#%EA%B0%9C%EC%9A%94\">개요</a></p>\n<ul>\n<li><a href=\"#api%EC%9D%98-%EA%B5%AC%EC%84%B1\">API의 구성</a></li>\n<li><a href=\"#%EB%8F%84%EB%A9%94%EC%9D%B8\">도메인</a></li>\n<li><a href=\"#%EC%9A%94%EC%B2%AD-dto\">요청 DTO</a></li>\n<li><a href=\"#%EC%9D%91%EB%8B%B5-dto\">응답 DTO</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%B2%AB-%EB%B2%88%EC%A7%B8-%EC%8B%9C%EB%8F%84\">첫 번째 시도</a></p>\n<ul>\n<li><a href=\"#%EA%B5%AC%ED%98%84-%EB%B0%A9%EB%B2%95\">구현 방법</a></li>\n<li><a href=\"#%EB%AC%B8%EC%A0%9C%EC%A0%90\">문제점</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%91%90-%EB%B2%88%EC%A7%B8-%EC%8B%9C%EB%8F%84\">두 번째 시도</a></p>\n<ul>\n<li><a href=\"#%EA%B5%AC%ED%98%84-%EB%B0%A9%EB%B2%95-1\">구현 방법</a></li>\n<li><a href=\"#%EB%AC%B8%EC%A0%9C%EC%A0%90-1\">문제점</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EA%B2%B0%EB%A1%A0-%EB%B0%8F-%EC%9A%94%EC%95%BD\">결론 및 요약</a></p>\n</li>\n</ul>\n</div>","excerpt":"배경 우아한테크코스의 첫 스프링 미션을 진행하며, 처음으로 레이어드 아키텍쳐를 적용해보는\n경험을 하게 되었습니다. Controller에서 JdbcTemplate을 사용하여 DB 처리를 하는 기존 코드에 Service - Repository 계층을 추가하는 과정에서 자연스레 들었던 고민은 도메인과 DTO의 처리를 어떻게\n해야할지였고, 이때 가졌던 생각의 흐름을 정리해보고자 합니다. 아래의 예시는 예약을 추가(저장) 하는 기능을 바탕으로 작성하였습니다😄 개요 API의 구성 예약을 추가할 때는  을 JSON 형태로 요청합니다. 예약 시간은 별도의 데이터베이스 테이블에 저장을 해둔 뒤, 시간의 ID값을 이용하여 조회합니다. 요청이 들어오면 ID값은 자동으로 채운 뒤(AUTO_INCREMENT), 입력된 시간 ID에 해당되는 예약 시간까지 불러와서 저장된 예약 내역을 응답하는 구조입니다. 도메인 여기서 날짜와 시간은 각각 LocalDate와 LocalTime을 사용할 수 있으나, 이번 단계…","frontmatter":{"date":"June 17, 2024","title":"Layered Architecture 적용 과정에서의 DTO 사용에 대한 고민","categories":"level2 Spring","author":"이상진","emoji":"🌱"},"fields":{"slug":"/woowacourse/level2/Layered_Architecture_적용_과정에서의_DTO_사용에_대한_고민/"}},"next":{"id":"d579e18f-300f-5b0e-a129-ee10c258164f","html":"<h2 id=\"안녕하세요\" style=\"position:relative;\"><a href=\"#%EC%95%88%EB%85%95%ED%95%98%EC%84%B8%EC%9A%94\" aria-label=\"안녕하세요 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>안녕하세요.</h2>\n<p>귀여운 상돌이 보고 즐거운 하루 보내세요!</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 106.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAVABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAQDBf/EABcBAQEBAQAAAAAAAAAAAAAAAAIBAwT/2gAMAwEAAhADEAAAAUtGqPLVA66SzEdOH//EABwQAAICAgMAAAAAAAAAAAAAAAEDAAIREhMxMv/aAAgBAQABBQKO9ZlrnZy8jhMSNy7uf//EABoRAAICAwAAAAAAAAAAAAAAAAABAhIQITH/2gAIAQMBAT8BSrsuiXMf/8QAGhEAAgIDAAAAAAAAAAAAAAAAAAIBEhAhMv/aAAgBAgEBPwFmtopInWP/xAAZEAADAAMAAAAAAAAAAAAAAAAAARARITH/2gAIAQEABj8CukhHRZFP/8QAGxABAQACAwEAAAAAAAAAAAAAAQARITFBYVH/2gAIAQEAAT8hJOvkM4Z4z8vfyD2GmMUJRt6C/9oADAMBAAIAAwAAABC/Fzz/xAAYEQACAwAAAAAAAAAAAAAAAAAAERAxYf/aAAgBAwEBPxB5jQuj/8QAGBEBAQADAAAAAAAAAAAAAAAAAQAQMWH/2gAIAQIBAT8QQgLjaMf/xAAcEAEAAgIDAQAAAAAAAAAAAAABABExQSFRYYH/2gAIAQEAAT8QccEIABYHVR0yyRwgFGdhAldnn1Xk1X5DkNF1HReAME4J/9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"sangdol.jpg\"\n        title=\"sangdol.jpg\"\n        src=\"/static/f65610c1dbac1471b07100809bf8b087/80e3c/sangdol.jpg\"\n        srcset=\"/static/f65610c1dbac1471b07100809bf8b087/4ec73/sangdol.jpg 180w,\n/static/f65610c1dbac1471b07100809bf8b087/158ba/sangdol.jpg 360w,\n/static/f65610c1dbac1471b07100809bf8b087/80e3c/sangdol.jpg 720w,\n/static/f65610c1dbac1471b07100809bf8b087/47311/sangdol.jpg 1080w,\n/static/f65610c1dbac1471b07100809bf8b087/644c5/sangdol.jpg 1440w,\n/static/f65610c1dbac1471b07100809bf8b087/c9080/sangdol.jpg 1854w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>","frontmatter":{"date":"April 30, 2024","title":"안녕하세요!","categories":"Welcome","author":"이상진","emoji":""},"fields":{"slug":"/hello/"}},"prev":{"id":"70b854b4-9196-59b4-a41f-d511b21bc957","html":"<h2 id=\"배경\" style=\"position:relative;\"><a href=\"#%EB%B0%B0%EA%B2%BD\" aria-label=\"배경 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>배경</h2>\n<p><a href=\"https://github.com/pricelees/spring-roomescape-member/tree/step2\">우아한테크코스의 두 번째 스프링 미션</a>을 통해 처음으로 스프링의 예외 처리를 경험하게 되었습니다.</p>\n<p>미션의 요구 사항은 <strong>예약, 테마, 시간 생성시 발생하는 예외를 적절하게 처리</strong>하는 것이었는데요, <code class=\"language-text\">지나간 날짜에 대한 예약은 불가능하다</code> 와 <code class=\"language-text\">입력된 ID에 대한 값이 DB에 없는</code> 것과 같은 예외 처리는 크게 어렵지 않았으나 입력에서의\n예외, 즉 <strong>입력되지 않은 값 등 값 자체가 잘못되었을 때</strong>에 대한 처리가 가장 어려웠습니다.</p>\n<p>가장 많이 헤맸던 이유는 <strong>요청 상황마다 발생하는 예외 타입이 달랐기 때문</strong>인데요, 이번 글에서는 해당 문제와 이 문제를 해결해가는 과정에 대해 기록해보려 합니다.</p>\n<p><U><strong>주의</strong></U></p>\n<p>스프링을 이번에 처음 사용하게 되어, 내용이 매우 부실할 수 있습니다. 이 글은 지식을 전달하는 글이 아닌, 개인의 시행착오 과정을 기록하는 글임을 감안해주시면 감사하겠습니다.🙇</p>\n<br/>\n<h2 id=\"api-구성\" style=\"position:relative;\"><a href=\"#api-%EA%B5%AC%EC%84%B1\" aria-label=\"api 구성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>API 구성</h2>\n<h3 id=\"api---관리자가-직접-예약을-추가\" style=\"position:relative;\"><a href=\"#api---%EA%B4%80%EB%A6%AC%EC%9E%90%EA%B0%80-%EC%A7%81%EC%A0%91-%EC%98%88%EC%95%BD%EC%9D%84-%EC%B6%94%EA%B0%80\" aria-label=\"api   관리자가 직접 예약을 추가 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>API - 관리자가 직접 예약을 추가</h3>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\">POST /reservations HTTP/<span class=\"token number\">1.1</span>\ncontent-type<span class=\"token operator\">:</span> application/json\n\n<span class=\"token punctuation\">{</span>\n   <span class=\"token property\">\"date\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2024-05-10\"</span><span class=\"token punctuation\">,</span>\n   <span class=\"token property\">\"memberId\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span>\n   <span class=\"token property\">\"themeId\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span>\n   <span class=\"token property\">\"timeId\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>관리자가 직접 예약을 추가할 땐, 예약 페이지에서 이미 등록된 회원, 테마, 시간과 날짜를 선택합니다. 이때 <strong>회원, 테마, 시간은</strong> <strong>DB에 저장된 ID값으로 요청</strong>됩니다. (DB에 회원1의 ID가 1로\n저장되어있다면, 관리자는 회원1을 선택하는데 요청은 이 회원의 ID인 1로 보내집니다)</p>\n<br/>\n<h3 id=\"api---테마-추가\" style=\"position:relative;\"><a href=\"#api---%ED%85%8C%EB%A7%88-%EC%B6%94%EA%B0%80\" aria-label=\"api   테마 추가 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>API - 테마 추가</h3>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\">POST /themes HTTP/<span class=\"token number\">1.1</span>\ncontent-type<span class=\"token operator\">:</span> application/json\n\n<span class=\"token punctuation\">{</span>\n   <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"테마 설명\"</span><span class=\"token punctuation\">,</span>\n   <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"테마 이름\"</span><span class=\"token punctuation\">,</span>\n   <span class=\"token property\">\"thumbnail\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"테마 썸네일 사진 URL\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>테마를 추가할땐, 이름, 설명, 썸네일 주소를 입력받습니다. 이 값은 모두 문자열입니다.</p>\n<br/>\n<h3 id=\"api---시간-추가\" style=\"position:relative;\"><a href=\"#api---%EC%8B%9C%EA%B0%84-%EC%B6%94%EA%B0%80\" aria-label=\"api   시간 추가 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>API - 시간 추가</h3>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\">POST /times HTTP/<span class=\"token number\">1.1</span>\ncontent-type<span class=\"token operator\">:</span> application/json\n\n<span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"startAt\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"HH:mm\"</span>  \n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>시간을 추가할 땐, HH:mm 형태의 시간값을 입력받습니다.</p>\n<br/>\n<h2 id=\"문제-상황\" style=\"position:relative;\"><a href=\"#%EB%AC%B8%EC%A0%9C-%EC%83%81%ED%99%A9\" aria-label=\"문제 상황 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>문제 상황</h2>\n<h3 id=\"테마와-시간을-추가할-때-값을-입력하지-않는다면--methodargumentnotvalidexception\" style=\"position:relative;\"><a href=\"#%ED%85%8C%EB%A7%88%EC%99%80-%EC%8B%9C%EA%B0%84%EC%9D%84-%EC%B6%94%EA%B0%80%ED%95%A0-%EB%95%8C-%EA%B0%92%EC%9D%84-%EC%9E%85%EB%A0%A5%ED%95%98%EC%A7%80-%EC%95%8A%EB%8A%94%EB%8B%A4%EB%A9%B4--methodargumentnotvalidexception\" aria-label=\"테마와 시간을 추가할 때 값을 입력하지 않는다면  methodargumentnotvalidexception permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>테마와 시간을 추가할 때 값을 입력하지 않는다면?- MethodArgumentNotValidException</h3>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">record</span> <span class=\"token class-name\">ThemeCreateRequest</span><span class=\"token punctuation\">(</span>\n        <span class=\"token annotation punctuation\">@NotBlank</span><span class=\"token punctuation\">(</span>message <span class=\"token operator\">=</span> <span class=\"token string\">\"테마 이름을 입력해 주세요.\"</span><span class=\"token punctuation\">)</span>\n        <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">,</span>\n        <span class=\"token annotation punctuation\">@NotBlank</span><span class=\"token punctuation\">(</span>message <span class=\"token operator\">=</span> <span class=\"token string\">\"테마 설명을 입력해 주세요.\"</span><span class=\"token punctuation\">)</span>\n        <span class=\"token class-name\">String</span> description<span class=\"token punctuation\">,</span>\n        <span class=\"token annotation punctuation\">@NotBlank</span><span class=\"token punctuation\">(</span>message <span class=\"token operator\">=</span> <span class=\"token string\">\"썸네일 주소를 입력해 주세요.\"</span><span class=\"token punctuation\">)</span>\n        <span class=\"token class-name\">String</span> thumbnail\n<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>위의 코드는, 테마를 추가할 때 사용하는 요청 DTO의 코드입니다. 위의 테마 추가 API 명세에 맞게 구성되어 있으며, <code class=\"language-text\">@NotBlank</code> 를 통해 빈 값을 입력받지 않도록 구성하였습니다.</p>\n<blockquote>\n<p><code class=\"language-text\">@NotBlank</code> 어노테이션은 해당 필드가 null이거나 빈 문자열(\"\")이 아닌지를 확인합니다.</p>\n</blockquote>\n<br/>\n<p><strong>만약 값을 입력하지 않으면</strong> 어떤 형태로 요청이 될까요? 테마를 추가할 때 이 세 가지의 값을 입력하지 않으면 요청 JSON은 다음과 같은 형태로 전송됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token constant\">POST</span> <span class=\"token operator\">/</span>themes <span class=\"token constant\">HTTP</span><span class=\"token operator\">/</span><span class=\"token number\">1.1</span>\ncontent<span class=\"token operator\">-</span>type<span class=\"token operator\">:</span>application<span class=\"token operator\">/</span>json \n\n<span class=\"token punctuation\">{</span>\n    <span class=\"token string\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"thumbnail\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br/>\n<p>빈 값이 입력되었을 때 발생되는 에러의 원인을 확인해보기 위해, 아래와 같이 간단한 ExceptionHandler를 만들어 스택 트레이스를 출력해 보겠습니다 ㅎㅎ</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@ExceptionHandler</span><span class=\"token punctuation\">(</span>value <span class=\"token operator\">=</span> <span class=\"token class-name\">Exception</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span>\n<span class=\"token annotation punctuation\">@ResponseStatus</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpStatus</span><span class=\"token punctuation\">.</span><span class=\"token constant\">BAD_REQUEST</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token class-name\">ErrorResponse</span> <span class=\"token function\">handleException</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    e<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br/>\n<p>스택 트레이스를 통해 발생되는 예외를 확인해보니, 다음과 같이 <code class=\"language-text\">MethodArgumentNotValidException</code>이 발생하는 것을 확인할 수 있었습니다. <strong>시간의 경우</strong>도 <code class=\"language-text\">startAt</code> 값이 빈\n문자열로 입력되어 같은 타입의 예외가 발생합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token class-name\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">.</span></span>MethodArgumentNotValidException</span><span class=\"token operator\">:</span>\n<span class=\"token class-name\">Validation</span> failed <span class=\"token keyword\">for</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></code></pre></div>\n<br/>\n<h3 id=\"️-예약을-추가할-때-값을-입력하지-않는다면---invalidformatexception\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-%EC%98%88%EC%95%BD%EC%9D%84-%EC%B6%94%EA%B0%80%ED%95%A0-%EB%95%8C-%EA%B0%92%EC%9D%84-%EC%9E%85%EB%A0%A5%ED%95%98%EC%A7%80-%EC%95%8A%EB%8A%94%EB%8B%A4%EB%A9%B4---invalidformatexception\" aria-label=\"️ 예약을 추가할 때 값을 입력하지 않는다면   invalidformatexception permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>⭐️ 예약을 추가할 때 값을 입력하지 않는다면? - InvalidFormatException</h3>\n<p>테마와 시간을 추가할 때, 값을 입력하지 않으면 <code class=\"language-text\">빈 문자열</code> 형태로 요청되는 것을 확인하였기에, <strong>예약을 추가할 때 역시 값을 입력하지 않으면 빈 값으로 처리될 것이라고 생각</strong>했습니다. 그래서 예약 페이지에서\n모든 값을 선택하지 않고 요청을 보냈는데…</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token constant\">POST</span> <span class=\"token operator\">/</span>reservations <span class=\"token constant\">HTTP</span><span class=\"token operator\">/</span><span class=\"token number\">1.1</span>\ncontent<span class=\"token operator\">-</span>type<span class=\"token operator\">:</span>application<span class=\"token operator\">/</span>json \n\n<span class=\"token punctuation\">{</span>\n    <span class=\"token string\">\"date\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"memberId\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"멤버 선택\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"themeId\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"테마 선택\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"timeId\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"시간 선택\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>위와 같이 <U><strong>날짜는 빈 값으로 입력되었으나 회원, 테마, 시간의 경우 각각 “멤버 선택”, “테마 선택”, “시간 선택”이라는 값으로 요청이 되고 있었습니다.</strong></U></p>\n<br/>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">record</span> <span class=\"token class-name\">AdminReservationCreateRequest</span><span class=\"token punctuation\">(</span>\n        <span class=\"token annotation punctuation\">@NotNull</span><span class=\"token punctuation\">(</span>message <span class=\"token operator\">=</span> <span class=\"token string\">\"날짜를 입력해 주세요.\"</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">LocalDate</span> date<span class=\"token punctuation\">,</span>\n        <span class=\"token annotation punctuation\">@NotNull</span><span class=\"token punctuation\">(</span>message <span class=\"token operator\">=</span> <span class=\"token string\">\"시간을 입력해 주세요.\"</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">Long</span> timeId<span class=\"token punctuation\">,</span>\n        <span class=\"token annotation punctuation\">@NotNull</span><span class=\"token punctuation\">(</span>message <span class=\"token operator\">=</span> <span class=\"token string\">\"테마를 입력해 주세요.\"</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">Long</span> themeId<span class=\"token punctuation\">,</span>\n        <span class=\"token annotation punctuation\">@NotNull</span><span class=\"token punctuation\">(</span>message <span class=\"token operator\">=</span> <span class=\"token string\">\"회원을 입력해 주세요.\"</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">Long</span> memberId\n<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>그래서 이 Request DTO 코드에서 date값을 제외하고 <code class=\"language-text\">@NotNull</code> 이 작동하지 않는 상황이었습니다. (date의 경우 값을 입력하지 않으면 빈 문자열로\n요청되어 <code class=\"language-text\">MethodArgumentNotValidException</code>이 발생합니다.)</p>\n<br/>\n<p>마찬가지로, 이전에 작성한 ExceptionHandler를 이용하여 스택 트레이스를 출력해 보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token class-name\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>http<span class=\"token punctuation\">.</span>converter<span class=\"token punctuation\">.</span></span>HttpMessageNotReadableException</span><span class=\"token operator\">:</span> <span class=\"token constant\">JSON</span> parse error<span class=\"token operator\">:</span> <span class=\"token class-name\">Cannot</span> deserialize value of type `<span class=\"token class-name\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span></span>Long</span>` from <span class=\"token class-name\">String</span> <span class=\"token string\">\"멤버 선택\"</span><span class=\"token operator\">:</span> not a valid `<span class=\"token class-name\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span></span>Long</span>`value\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n<span class=\"token class-name\">Caused</span> by<span class=\"token operator\">:</span><span class=\"token class-name\"><span class=\"token namespace\">com<span class=\"token punctuation\">.</span>fasterxml<span class=\"token punctuation\">.</span>jackson<span class=\"token punctuation\">.</span>databind<span class=\"token punctuation\">.</span>exc<span class=\"token punctuation\">.</span></span>InvalidFormatException</span><span class=\"token operator\">:</span> <span class=\"token class-name\">Cannot</span> deserialize value of type `<span class=\"token class-name\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span></span>Long</span>` from <span class=\"token class-name\">String</span> <span class=\"token string\">\"멤버 선택\"</span><span class=\"token operator\">:</span> not a valid `<span class=\"token class-name\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span></span>Long</span>`value\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></code></pre></div>\n<p>출력된 결과를 보고 아래의 두 가지를 유추할 수 있었습니다.</p>\n<ol>\n<li><code class=\"language-text\">“멤버 선택”</code>이라는 <strong>문자열을 Long 타입으로 변환할 수 없기에</strong> <code class=\"language-text\">InvalidFormatException</code>이 발생한다.</li>\n<li><code class=\"language-text\">InvalidFormatException</code>이 발생해도, 발생되는 예외 타입은 <code class=\"language-text\">HttpMessageNotReadableException</code> 이다.</li>\n</ol>\n<br/>\n<p><strong>(번외)</strong></p>\n<p>실제로 스택 트레이스를 보면 <code class=\"language-text\">AbstractJackson2HttpMessageConverter.readJavaType</code> 에서 예외가 발생했다고 하는데, 이 소스코드를 보면 <strong>try - catch</strong>로 특정 예외가\n발생하면 <code class=\"language-text\">HttpMessageNotReadableException</code>을 던지는 것을 확인할 수 있습니다.</p>\n<br/>\n<h3 id=\"요약\" style=\"position:relative;\"><a href=\"#%EC%9A%94%EC%95%BD\" aria-label=\"요약 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>요약</h3>\n<p>결론적으로 현재 상황에서는 <code class=\"language-text\">MethodArgumentNotValidException</code> 과 <code class=\"language-text\">InvalidFormatException</code> 으로 예외 처리를 나눌 수 있겠다고 판단했습니다.</p>\n<ul>\n<li><strong>MethodArgumentNotValidException</strong> 은 날짜, 시간, 테마 이름, 테마 설명, 테마 썸네일</li>\n<li><strong>InvalidFormatException(HttpMessageNotReadableException)</strong> 은 회원 ID, 테마 ID, 시간 ID</li>\n</ul>\n<br/>\n<h2 id=\"예외-응답-dto\" style=\"position:relative;\"><a href=\"#%EC%98%88%EC%99%B8-%EC%9D%91%EB%8B%B5-dto\" aria-label=\"예외 응답 dto permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>예외 응답 DTO</h2>\n<p>본격적으로 예외 처리를 해보기 전에, 다음과 같은 간단한 <strong>예외 응답용 DTO</strong>를 구성해 보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">record</span> <span class=\"token class-name\">ErrorResponse</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> url<span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span> method<span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span> message<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>이 DTO는 <strong>요청 url, 요청 HTTP 메서드, 예외 메시지</strong>로 구성하였습니다.(<strong>이번 단계에서는 실제 응답 값으로 디버깅을 했기 때문에</strong> 위와 같이 구성했고, 이후에 로깅을 시도함에 따라 예외 응답\n객체의 구성을 바꾸게 되었습니다 ㅎㅎ)</p>\n<br/>\n<h2 id=\"methodargumentnotvalidexception-처리\" style=\"position:relative;\"><a href=\"#methodargumentnotvalidexception-%EC%B2%98%EB%A6%AC\" aria-label=\"methodargumentnotvalidexception 처리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>MethodArgumentNotValidException 처리</h2>\n<p>우선, <code class=\"language-text\">@Valid</code>  어노테이션 검증으로 인해 발생하는 <code class=\"language-text\">MethodArgumentNotValidException</code> 을 먼저 처리하고자 했습니다. 방법을 모르니 열심히 구글링한\n결과 <a href=\"https://www.baeldung.com/global-error-handler-in-a-spring-rest-api#1-handling-the-exceptions\">빛과 같은 baeldung의 글(빛덩..)</a>\n을 찾게 되었고 이곳에 작성된 방법을 참고하여 진행하였습니다.</p>\n<p>예외 메시지를 작성하기에 앞서, 만약 <strong>여러 개의 값에서 예외가 발생하면</strong> 어떻게 할까요? <strong>모든 예외 메시지를 합쳐서 응답</strong>할수도 있고, <strong>그 중 하나의 값에 대한 메시지만 응답</strong>할 수도 있습니다. 당연히 처음 하는 만큼 두\n방법 모두를 시도하였습니다.</p>\n<br/>\n<h3 id=\"1-여러-값에서-예외가-발생되도-하나만-출력하자\" style=\"position:relative;\"><a href=\"#1-%EC%97%AC%EB%9F%AC-%EA%B0%92%EC%97%90%EC%84%9C-%EC%98%88%EC%99%B8%EA%B0%80-%EB%B0%9C%EC%83%9D%EB%90%98%EB%8F%84-%ED%95%98%EB%82%98%EB%A7%8C-%EC%B6%9C%EB%A0%A5%ED%95%98%EC%9E%90\" aria-label=\"1 여러 값에서 예외가 발생되도 하나만 출력하자 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 여러 값에서 예외가 발생되도 하나만 출력하자</h3>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@ExceptionHandler</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MethodArgumentNotValidException</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span>\n<span class=\"token annotation punctuation\">@ResponseStatus</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpStatus</span><span class=\"token punctuation\">.</span><span class=\"token constant\">BAD_REQUEST</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token class-name\">ErrorResponse</span> <span class=\"token function\">handleMethodArgumentNotValidException</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpServletRequest</span> request<span class=\"token punctuation\">,</span>\n                                                           <span class=\"token class-name\">MethodArgumentNotValidException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">String</span> errorMessage <span class=\"token operator\">=</span> e<span class=\"token punctuation\">.</span><span class=\"token function\">getBindingResult</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getFieldError</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getDefaultMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ErrorResponse</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span><span class=\"token function\">getRequestURI</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">.</span><span class=\"token function\">getMethod</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> errorMessage<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>                </code></pre></div>\n<p>Baeldung의 글에서는 <code class=\"language-text\">getFieldErrors()</code> 를 이용하여 모든 예외를 리스트로 받지만, <code class=\"language-text\">getFieldError()</code> 라는 하나의 예외만 받아오는 메서드가 있었고 이를 활용하였습니다.</p>\n<p>하지만, 이 방법은 좋은 방법이 아니었습니다. 만약 테마에서 이름, 설명, 썸네일 모두를 입력하지 않게 되면 <strong>어떨 때는 “설명을 입력해 주세요” 가 반환되고, 어떨 때는 “썸네일을 입력해 주세요”가 반환되는 등\n매번 다른 결과가 나왔기에</strong> 특정 상황에 대한 정확한 예외 메시지를 예측할 수 없는 문제가 있었습니다.</p>\n<ul>\n<li>테스트를 할 때, 단순히 HTTP 코드로 확인하는 경우 문제가 없겠지만 구체적인 예외 메시지에 대한 테스트는 불가능해지게 됩니다.</li>\n</ul>\n<br/>\n<h3 id=\"2-여러-값에서-예외가-발생하면-모든-예외-메시지를-합쳐서-출력하자\" style=\"position:relative;\"><a href=\"#2-%EC%97%AC%EB%9F%AC-%EA%B0%92%EC%97%90%EC%84%9C-%EC%98%88%EC%99%B8%EA%B0%80-%EB%B0%9C%EC%83%9D%ED%95%98%EB%A9%B4-%EB%AA%A8%EB%93%A0-%EC%98%88%EC%99%B8-%EB%A9%94%EC%8B%9C%EC%A7%80%EB%A5%BC-%ED%95%A9%EC%B3%90%EC%84%9C-%EC%B6%9C%EB%A0%A5%ED%95%98%EC%9E%90\" aria-label=\"2 여러 값에서 예외가 발생하면 모든 예외 메시지를 합쳐서 출력하자 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 여러 값에서 예외가 발생하면, 모든 예외 메시지를 합쳐서 출력하자.</h3>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@ExceptionHandler</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MethodArgumentNotValidException</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span>\n<span class=\"token annotation punctuation\">@ResponseStatus</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpStatus</span><span class=\"token punctuation\">.</span><span class=\"token constant\">BAD_REQUEST</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token class-name\">ErrorResponse</span> <span class=\"token function\">handleMethodArgumentNotValidException</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpServletRequest</span> request<span class=\"token punctuation\">,</span>\n                                                           <span class=\"token class-name\">MethodArgumentNotValidException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">String</span> errorMessage <span class=\"token operator\">=</span> e<span class=\"token punctuation\">.</span><span class=\"token function\">getBindingResult</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getFieldErrors</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">stream</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">FieldError</span><span class=\"token operator\">::</span><span class=\"token function\">getDefaultMessage</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">collect</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Collectors</span><span class=\"token punctuation\">.</span><span class=\"token function\">joining</span><span class=\"token punctuation\">(</span><span class=\"token string\">\", \"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ErrorResponse</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span><span class=\"token function\">getRequestURI</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">.</span><span class=\"token function\">getMethod</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> errorMessage<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>        </code></pre></div>\n<p>Baeldung에서는 For문을 이용하여 처리하지만, Stream을 이용하여 모든 예외 메시지를 <code class=\"language-text\">“, “</code>로 구분하여 합치는 방식으로 구현하였습니다.</p>\n<br/>\n<h3 id=\"결과\" style=\"position:relative;\"><a href=\"#%EA%B2%B0%EA%B3%BC\" aria-label=\"결과 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>결과</h3>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token comment\">// 모든 값을 입력하지 않는 경우</span>\n<span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"url\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/themes\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"method\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"POST\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"message\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"테마 설명을 입력해 주세요, 썸네일 주소를 입력해 주세요, 테마 이름을 입력해 주세요\"</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// 테마 설명만 입력한 경우</span>\n<span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"url\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/themes\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"method\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"POST\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"message\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"썸네일 주소를 입력해 주세요, 테마 이름을 입력해 주세요\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>지금은 값을 입력하지 않은(빈 값인) 경우만 고려하지만, <code class=\"language-text\">@Valid</code> 어노테이션으로 지정한 모든 예외는 이 방법으로 처리할 수 있었습니다.</p>\n<br/>\n<h2 id=\"invalidformatexception-처리\" style=\"position:relative;\"><a href=\"#invalidformatexception-%EC%B2%98%EB%A6%AC\" aria-label=\"invalidformatexception 처리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>InvalidFormatException 처리</h2>\n<h3 id=\"들어가기-전에\" style=\"position:relative;\"><a href=\"#%EB%93%A4%EC%96%B4%EA%B0%80%EA%B8%B0-%EC%A0%84%EC%97%90\" aria-label=\"들어가기 전에 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>들어가기 전에..</h3>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@ExceptionHandler</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span>\n<span class=\"token annotation punctuation\">@ResponseStatus</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpStatus</span><span class=\"token punctuation\">.</span><span class=\"token constant\">INTERNAL_SERVER_ERROR</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token class-name\">ErrorResponse</span> <span class=\"token function\">handleException</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpServletRequest</span> request<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Exception</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    e<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ErrorResponse</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span><span class=\"token function\">getRequestURI</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">.</span><span class=\"token function\">getMethod</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> e<span class=\"token punctuation\">.</span><span class=\"token function\">getMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong>ControllerAdvice</strong>에는 핸들러가 없는 예외 처리를 위해, 위와 같은 Exception 타입을 처리하는 핸들러가 정의되어 있습니다.</p>\n<br/>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@ExceptionHandler</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">InvalidFormatException</span> e<span class=\"token punctuation\">)</span>\n<span class=\"token annotation punctuation\">@ResponseStatus</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpStatus</span><span class=\"token punctuation\">.</span><span class=\"token constant\">BAD_REQUEST</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token class-name\">ErrorResponse</span> <span class=\"token function\">handleInvalidFormatException</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpServletRequest</span> request<span class=\"token punctuation\">,</span> <span class=\"token class-name\">InvalidFormatException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>이 상황에서, 위와 같이 InvalidFormatException 타입을 처리하도록 구현하면, 예외 발생시 Exception 타입 핸들러가 예외를 처리하게 됩니다.</p>\n<ul>\n<li><strong>실제 발생한 예외는 InvalidFormatException 이지만, Jackson은 HttpMessageNotReadableException 타입으로 예외를 발생시키기 때문입니다!</strong></li>\n</ul>\n<p>따라서, 이후의 과정에서는 InvalidFormatException이 아닌 <code class=\"language-text\">HttpMessageNotReadableException</code>으로 해당 예외를 처리하겠습니다.</p>\n<br/>\n<h3 id=\"우선-다-뽑아보겠습니다\" style=\"position:relative;\"><a href=\"#%EC%9A%B0%EC%84%A0-%EB%8B%A4-%EB%BD%91%EC%95%84%EB%B3%B4%EA%B2%A0%EC%8A%B5%EB%8B%88%EB%8B%A4\" aria-label=\"우선 다 뽑아보겠습니다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>우선 다 뽑아보겠습니다.</h3>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@ExceptionHandler</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpMessageNotReadableException</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span>\n<span class=\"token annotation punctuation\">@ResponseStatus</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpStatus</span><span class=\"token punctuation\">.</span><span class=\"token constant\">BAD_REQUEST</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token class-name\">ErrorResponse</span> <span class=\"token function\">handleHttpMessageNotReadableException</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpServletRequest</span> request<span class=\"token punctuation\">,</span>\n                                                           <span class=\"token class-name\">HttpMessageNotReadableException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"e.getMessage() = \"</span> <span class=\"token operator\">+</span> e<span class=\"token punctuation\">.</span><span class=\"token function\">getMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>글이 길어 다시 간략하게 작성하자면, HttpMessageNotReadableException은 <strong>관리자가 예약을 추가할 때 시간, 테마, 회원을 입력하지 않는 경우에 발생</strong>합니다. 이 예외 타입은\n이전처럼 <code class=\"language-text\">getBindingResult()</code> 와 같은 기능도 없기에.. 무작정 가능한 모든 것을 출력해 보았습니다.. 라고 하지만 사실 <code class=\"language-text\">getMessage()</code> 밖에 없더라구요 ㅎㅎ..</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">e<span class=\"token punctuation\">.</span><span class=\"token function\">getMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span> parse error<span class=\"token operator\">:</span> <span class=\"token class-name\">Cannot</span> deserialize value of type `<span class=\"token class-name\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span></span>Long</span>` from <span class=\"token class-name\">String</span> <span class=\"token string\">\"테마 선택\"</span><span class=\"token operator\">:</span> not a valid `<span class=\"token class-name\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span></span>Long</span>`value</code></pre></div>\n<p>출력 결과는 위와 같이 되는데, 앞 부분은 크게 의미 없고 뒤에 있는 <strong>“테마 선택”</strong> 부분은 활용할 수 있을 것 같습니다.</p>\n<br/>\n<h3 id=\"1차-시도\" style=\"position:relative;\"><a href=\"#1%EC%B0%A8-%EC%8B%9C%EB%8F%84\" aria-label=\"1차 시도 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1차 시도</h3>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@ExceptionHandler</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpMessageNotReadableException</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span>\n<span class=\"token annotation punctuation\">@ResponseStatus</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpStatus</span><span class=\"token punctuation\">.</span><span class=\"token constant\">BAD_REQUEST</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token class-name\">ErrorResponse</span> <span class=\"token function\">handleHttpMessageNotReadableException</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpServletRequest</span> request<span class=\"token punctuation\">,</span>\n                                                           <span class=\"token class-name\">HttpMessageNotReadableException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">String</span> message <span class=\"token operator\">=</span> e<span class=\"token punctuation\">.</span><span class=\"token function\">getMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\">String</span> errorField <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">.</span><span class=\"token function\">contains</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"멤버\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        errorField <span class=\"token operator\">=</span> <span class=\"token string\">\"멤버\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">.</span><span class=\"token function\">contains</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"시간\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        errorField <span class=\"token operator\">=</span> <span class=\"token string\">\"시간\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">.</span><span class=\"token function\">contains</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"테마\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        errorField <span class=\"token operator\">=</span> <span class=\"token string\">\"테마\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token class-name\">String</span> responseMessage <span class=\"token operator\">=</span> errorField <span class=\"token operator\">+</span> <span class=\"token string\">\"을(를) 입력해 주세요.\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ErrorResponse</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span><span class=\"token function\">getRequestURI</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">.</span><span class=\"token function\">getMethod</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> responseMessage<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>단순하게, 이전에 발생한 예외 메시지를 참고하여 String의 contains를 이용하여 처리하는 방식입니다.</p>\n<br/>\n<h3 id=\"문제점\" style=\"position:relative;\"><a href=\"#%EB%AC%B8%EC%A0%9C%EC%A0%90\" aria-label=\"문제점 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>문제점</h3>\n<p>일단 처리 자체는 되었지만, 문제점이 정~말 많은 방식이라고 느껴졌습니다.</p>\n<ol>\n<li>지금의 예외 핸들링은, 테마, 시간, 멤버를 선택하지 않았을 때 기본 입력값인 <code class=\"language-text\">“테마 선택”</code> 등에 의존합니다. <strong>즉 클라이언트 코드에 완전히 의존하는 구조입니다.</strong></li>\n<li>멤버, 시간, 테마 중 2개 이상의 값이 입력되지 않아도 하나의 값만 표시됩니다. 즉 <strong>입력되지 않은 모든 값을 예외 메시지에 담을 수 없습니다.</strong>\n<ul>\n<li>추가적으로, 날짜를 입력하지 않았을 때 발생하는 MethodArgumentNotValidException와 같이 묶어서 처리할 수도 없습니다!</li>\n</ul>\n</li>\n</ol>\n<br/>\n<h2 id=\"다음-편에-계속됩니다\" style=\"position:relative;\"><a href=\"#%EB%8B%A4%EC%9D%8C-%ED%8E%B8%EC%97%90-%EA%B3%84%EC%86%8D%EB%90%A9%EB%8B%88%EB%8B%A4\" aria-label=\"다음 편에 계속됩니다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>다음 편에 계속됩니다..</h2>\n<p>여러 방법을 찾아보던 도중 <code class=\"language-text\">Custom Deserializer</code>를 이용하여 이 문제들을 해결할 수 있었는데요, <code class=\"language-text\">Custom Deserializer</code>와 <code class=\"language-text\">JsonNode</code>와 같은 내용에 대한 고민 과정까지\n작성하기엔 글이 너무 길어지겠다는 생각에 이 부분은 다음 편에 별도로 작성하겠습니다 🙇</p>\n<p>여기까지 읽어주셔서 감사합니다. 즐거운 하루 보내세요😄</p>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#%EB%B0%B0%EA%B2%BD\">배경</a></p>\n</li>\n<li>\n<p><a href=\"#api-%EA%B5%AC%EC%84%B1\">API 구성</a></p>\n<ul>\n<li><a href=\"#api---%EA%B4%80%EB%A6%AC%EC%9E%90%EA%B0%80-%EC%A7%81%EC%A0%91-%EC%98%88%EC%95%BD%EC%9D%84-%EC%B6%94%EA%B0%80\">API - 관리자가 직접 예약을 추가</a></li>\n<li><a href=\"#api---%ED%85%8C%EB%A7%88-%EC%B6%94%EA%B0%80\">API - 테마 추가</a></li>\n<li><a href=\"#api---%EC%8B%9C%EA%B0%84-%EC%B6%94%EA%B0%80\">API - 시간 추가</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%AC%B8%EC%A0%9C-%EC%83%81%ED%99%A9\">문제 상황</a></p>\n<ul>\n<li><a href=\"#%ED%85%8C%EB%A7%88%EC%99%80-%EC%8B%9C%EA%B0%84%EC%9D%84-%EC%B6%94%EA%B0%80%ED%95%A0-%EB%95%8C-%EA%B0%92%EC%9D%84-%EC%9E%85%EB%A0%A5%ED%95%98%EC%A7%80-%EC%95%8A%EB%8A%94%EB%8B%A4%EB%A9%B4--methodargumentnotvalidexception\">테마와 시간을 추가할 때 값을 입력하지 않는다면?- MethodArgumentNotValidException</a></li>\n<li><a href=\"#%EF%B8%8F-%EC%98%88%EC%95%BD%EC%9D%84-%EC%B6%94%EA%B0%80%ED%95%A0-%EB%95%8C-%EA%B0%92%EC%9D%84-%EC%9E%85%EB%A0%A5%ED%95%98%EC%A7%80-%EC%95%8A%EB%8A%94%EB%8B%A4%EB%A9%B4---invalidformatexception\">⭐️ 예약을 추가할 때 값을 입력하지 않는다면? - InvalidFormatException</a></li>\n<li><a href=\"#%EC%9A%94%EC%95%BD\">요약</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%98%88%EC%99%B8-%EC%9D%91%EB%8B%B5-dto\">예외 응답 DTO</a></p>\n</li>\n<li>\n<p><a href=\"#methodargumentnotvalidexception-%EC%B2%98%EB%A6%AC\">MethodArgumentNotValidException 처리</a></p>\n<ul>\n<li><a href=\"#1-%EC%97%AC%EB%9F%AC-%EA%B0%92%EC%97%90%EC%84%9C-%EC%98%88%EC%99%B8%EA%B0%80-%EB%B0%9C%EC%83%9D%EB%90%98%EB%8F%84-%ED%95%98%EB%82%98%EB%A7%8C-%EC%B6%9C%EB%A0%A5%ED%95%98%EC%9E%90\">1. 여러 값에서 예외가 발생되도 하나만 출력하자</a></li>\n<li><a href=\"#2-%EC%97%AC%EB%9F%AC-%EA%B0%92%EC%97%90%EC%84%9C-%EC%98%88%EC%99%B8%EA%B0%80-%EB%B0%9C%EC%83%9D%ED%95%98%EB%A9%B4-%EB%AA%A8%EB%93%A0-%EC%98%88%EC%99%B8-%EB%A9%94%EC%8B%9C%EC%A7%80%EB%A5%BC-%ED%95%A9%EC%B3%90%EC%84%9C-%EC%B6%9C%EB%A0%A5%ED%95%98%EC%9E%90\">2. 여러 값에서 예외가 발생하면, 모든 예외 메시지를 합쳐서 출력하자.</a></li>\n<li><a href=\"#%EA%B2%B0%EA%B3%BC\">결과</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#invalidformatexception-%EC%B2%98%EB%A6%AC\">InvalidFormatException 처리</a></p>\n<ul>\n<li><a href=\"#%EB%93%A4%EC%96%B4%EA%B0%80%EA%B8%B0-%EC%A0%84%EC%97%90\">들어가기 전에..</a></li>\n<li><a href=\"#%EC%9A%B0%EC%84%A0-%EB%8B%A4-%EB%BD%91%EC%95%84%EB%B3%B4%EA%B2%A0%EC%8A%B5%EB%8B%88%EB%8B%A4\">우선 다 뽑아보겠습니다.</a></li>\n<li><a href=\"#1%EC%B0%A8-%EC%8B%9C%EB%8F%84\">1차 시도</a></li>\n<li><a href=\"#%EB%AC%B8%EC%A0%9C%EC%A0%90\">문제점</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%8B%A4%EC%9D%8C-%ED%8E%B8%EC%97%90-%EA%B3%84%EC%86%8D%EB%90%A9%EB%8B%88%EB%8B%A4\">다음 편에 계속됩니다..</a></p>\n</li>\n</ul>\n</div>","frontmatter":{"date":"June 18, 2024","title":"스프링 입력에서의 예외 처리 여정 1 - 문제 인식 및 일부 해결","categories":"level2 Spring Exception","author":"이상진","emoji":"🌱"},"fields":{"slug":"/woowacourse/level2/스프링_입력에서의_예외_처리_여정/1/"}},"site":{"siteMetadata":{"siteUrl":"https://pricelees.github.com","comments":{"utterances":{"repo":"pricelees/pricelees.github.io"}}}}},"pageContext":{"slug":"/woowacourse/level2/Layered_Architecture_적용_과정에서의_DTO_사용에_대한_고민/","nextSlug":"/hello/","prevSlug":"/woowacourse/level2/스프링_입력에서의_예외_처리_여정/1/"}},"staticQueryHashes":["1073350324","1956554647","2938748437"]}